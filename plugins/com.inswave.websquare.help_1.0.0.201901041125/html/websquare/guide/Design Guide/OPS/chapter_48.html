<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 ?Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><title>MapChart</title><link rel="stylesheet" href="css/book.css" type="text/css" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="EPB-UUID" content="d3cdfc6701eaec7c" /></head><body><div id="content"><h1 id="r_736c7b56118a92c3" class="chapter_title"><span class="chapter_title_n">39.</span>MapChart</h1><p id="r_cd2086ac25af14fb" class="element headline">D3을 이용해 우리나라 전국지도에 입력받은 데이터를 다양한 형태로 시각화하여 표현하는 컴포넌트입니다. 확대 및 축소 비율을 설정 할 수 있으며 드래그앤드롭, 사용자 정의 마킹 등 기능을 제공합니다.</p><h1 id="r_58c585e7a0523e61" class="element heading1"><span class="heading1_n">39.1</span>Property</h1><table id="r_e0e9d149f5ffde39" class="element table"><thead><tr><th><p>Property</p></th><th><p>Description</p></th></tr></thead><tbody><tr><td><p>dataLists</p></td><td><p>지도와 연동할 dataList들을 ,를 구분자로 나열합니다.</p></td></tr><tr><td><p>dataMapPath</p></td><td><p>지도를 표현하는 json데이터가 위치한 폴더 경로입니다. 기본값은 externalJS/mapchart</p></td></tr><tr><td><p>dataMapRatio_level0</p></td><td><p>[default:simp1]전국지도에 대한 간략화 비율 설정한 것 입니다. simp1은 원래지도를 Visvalingam, weighted area 1%로 축약한 것 입니다. simp01은 Visvalingam, weighted area 0.1%로 축약한 것 입니다. simp16은 Douglas-Peucker 16%로 축약한 것 입니다.</p></td></tr><tr><td><p>dataMapRatio_level1</p></td><td><p>[default:simp1]시,군 지도대한 간략화 비율 설정한 것 입니다. simp1은 원래지도를 Visvalingam, weighted area 1%로 축약한 것 입니다. simp008은 Visvalingam-effective Area로 0.08%로 축약한 것 입니다. simp16은 Douglas-Peucker 16%로 축약한 것 입니다.</p></td></tr><tr><td colspan="1"><p>dataMapRatio_level2</p></td><td colspan="1"><p>[default:simp1] 읍,면,동 지도에대한 간략화 비율 설정한 것 입니다. simp1은 원래지도를 Visvalingam, weighted area 1%로 축약한 것 입니다. simp008은 Visvalingam-effective Area로 0.08%로 축약한 것 입니다. simp16은 Douglas-Peucker 16%로 축약한 것 입니다.</p></td></tr><tr><td colspan="1"><p>event_deselect</p></td><td colspan="1"><p>[default:onmouseout] 이벤트가 발생한 지점의 지도에 선택이 해제된 효과를 표현하는 이벤트를 지정합니다. none을 입력하면 해당 처리를 실행할 이벤트를 지정하지 않습니다.</p></td></tr><tr><td colspan="1"><p>event_drag</p></td><td colspan="1"><p>[default:ondrag] 지도의 drag 기능을 사용할 것인지에 대한 여부입니다. none으로 설정하면 마우스 drag를 통한 지도 이동 기능을 사용하지 않습니다.</p></td></tr><tr><td colspan="1"><p>event_drilldown</p></td><td colspan="1"><p>[default:onclick] 이벤트가 발생한 지점의 지도 내부로 들어갈 이벤트를 지정합니다. none을 입력하면 해당 처리를 실행할 이벤트를 지정하지 않습니다.</p></td></tr><tr><td colspan="1"><p>event_drillup</p></td><td colspan="1"><p>[default:oncontextmenu] 현재 지도의 상위지도로 이동하는 처리를 실행할 이벤트를 지정합니다. none을 입력하면 해당 처리를 실행할 이벤트를 지정하지 않습니다.</p></td></tr><tr><td colspan="1"><p>event_select</p></td><td colspan="1"><p>[default:onmouseover] 이벤트가 발생한 지점의 지도에 선택된 효과를 표현하는 이벤트를 지정합니다. none을 입력하면 해당 처리를 실행할 이벤트를 지정하지 않습니다.</p></td></tr><tr><td colspan="1"><p>event_tooltipoff</p></td><td colspan="1"><p>[default:onmouseout] tooltip을 감출 이벤트를 지정합니다. none을 입력하면 해당 처리를 실행할 이벤트를 지정하지 않습니다.</p></td></tr><tr><td colspan="1"><p>event_tooltipon</p></td><td colspan="1"><p>[default:onmouseover] 이벤트가 발생한 지점의 지도의 정보를 tooltip을 띄워 보여줄 이벤트를 지정합니다. none을 입력하면 해당 처리를 실행할 이벤트를 지정하지 않습니다.</p></td></tr><tr><td colspan="1"><p>event_zoom</p></td><td colspan="1"><p>[default:onzoom] 지도의 확대,축소 기능을 사용할 것인지에 대한 여부입니다. none으로 설정하면 마우스 휠을 통한 zoom기능을 사용하지 않습니다.</p></td></tr><tr><td colspan="1"><p>setTooltipStrFunc</p></td><td colspan="1"><p>tooltip을 보여줄 때, 사용자 정의 string을 가져오기 위한 함수명 입니다.</p></td></tr><tr><td colspan="1"><p>startMap</p></td><td colspan="1"><p>[default:0] 처음 화면에 그려질 지도에 대한 지도코드값을 입력합니다. 기본값은 0으로 전국지도. (ex : 11입력시 처음 그려질 때 서울지도가 나타납니다.</p></td></tr><tr><td colspan="1"><p>zoomMax</p></td><td colspan="1"><p>[default:5] 지도 확대 시 최대화 비율 한계값을 설정합니다.</p></td></tr><tr><td colspan="1"><p>zoomMin</p></td><td colspan="1"><p>[default:0.2] 지도 축소 시 최소화 비율 한계값을 설정합니다.</p></td></tr></tbody></table><h1 id="r_98a0084113f1be87" class="element heading1"><span class="heading1_n">39.2</span>브라우저 캡쳐화면</h1><div id="r_b514d41ad26c6bcc" class="element image"><p class="content"><img alt="" src="images/image305.png" width="402" height="536" /></p><p class="caption omit"><span class="image_caption_n">[그림 39-1]</span>01</p></div><div id="r_e9464da06be21b66" class="element image"><p class="content"><img alt="" src="images/image306.png" width="576" height="696" /></p><p class="caption omit"><span class="image_caption_n">[그림 39-2]</span>02</p></div><p id="r_a2adc45ee3b455a1" class="element headline">mapChart의 디자인은 css 로 변경하는것이 아니라 스크립트를 이용해서 외부의 json파일이나 html 파일의 값을 동적으로 가져와서 변경합니다.</p><p id="r_a60e029fddb59459" class="element headline">예)</p><p id="r_a33955612bdc0c0e" class="element normal">scwin.colorScale1 = d3.scale.linear()</p><p id="r_c08b7f2fd918cb9f" class="element normal">.range(["red", "yellow", "green", "turquoise", "blue"])</p><p id="r_0bdae0d277c70eab" class="element normal">.domain([0, 0.25, 0.5, 0.75, 1]);</p><p id="r_050d98c364e7c43c" class="element normal">scwin.mapchart1_onmapdatachange = function(dataListId) {</p><p id="r_4d2d9d9e6d9775a8" class="element normal">var dataList = WebSquare.util.getComponentById(dataListId);</p><p id="r_eaeae8bd97d63e32" class="element normal">switch(dataListId) {</p><p id="r_4a1cd3af811e3f3c" class="element normal">case "dataList1" :</p><p id="r_d5f651b94385ed82" class="element normal">var data = dataList.getAllJSON();</p><p id="r_ebbf48eca32c3506" class="element normal">for(var i = 0; i &lt; data.length; i++) {</p><p id="r_8d9bcfe3e5ead230" class="element normal">var municipality = d3.select("#" + <a class="link" href="http://this.id/">this.id</a> + "_map").select(".municipality.c" + data[i].code);</p><p id="r_990bc96af8259b41" class="element normal">municipality.style("fill", scwin.colorScale1(data[i].value));</p><p id="r_d9c91c105f864c09" class="element normal">}</p><p id="r_f0198d21c692c8d1" class="element normal">break;</p><p id="r_c291b9eb46cde220" class="element normal">}</p><p id="r_b6286f024c89dc8d" class="element normal">}</p><p id="r_b711a46bfdaeca5b" class="element headline">변경방법은 기술지원에서 문의바랍니다.</p></div></body></html>
